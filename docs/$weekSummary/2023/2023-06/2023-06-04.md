## 2023-06-04

【本周工作重点】

1. 【运营监控0530迭代】已上线
1. 【取派KPI0530迭代】已上线
1. 【城际实时量0615迭代】KS&ERP前端静态页面已完成80%，已发布STG

【问题反馈】

1. 【ERPCOO全系统】现在我们COO系统在生产经常会报入参类型错误，或者是入参转换非法，我们遇到的最多的类型错误之前一般是组织Id这个字段，departmentIds期待一个由字符串组成的数组，错误类型是这个数组里面有undefined值，现在出现次数最多的是查询时间statTimes，错误类型是传了无效的时间入参
2. 【ERPCOO全系统】现在COO系统的一些老旧模块代码内操作session是非常复杂的，到处都有setItem和getItem，而且JSON相关的parse和stringify两个api出现的频率也很高，JSON的序列化和反序列化有一个非常坑的地方，在遇到一些特殊复杂类型的数据时会直接转化为空或者是调用toJSON方法去转化为字符串，尤其是Date类型
3. 【城际实时量】写比较复杂的交互之前可以先打一个草稿，准备一下注释和设计之后再写，我们现在的很多功能都习惯于去用配置文件去解决，但是丝毫不考虑，那种奇葩的需求场景，是不可以通过一些基础设置解决的，而且你的设计还不好轻易改

【改进与措施】

1. 【参数类型和访问属性错误】学会保护性编程，在公共文件的函数体中，不要相信每一个入参类型是符合你的预期的，如果在你的代码块中出现了数组上的api，我们可以利用一个空数组去concat一次传入的变量再去操作，这样就绝对不会出现调用方法undefined的错误。在条件语句中，我们尽量将对比变量转化为同一种类型再去比较。多用JS提供的原生方法去解决问题，不要自己写一些不必要的方法，现在系统里面出现的JS原生api其实非常少，很多代码都可以利用原生api去优化
2. 【利用策略模式去优化配置化方案】在取派、分拨和城际三个KPI和实时量，我们经常可以看到对queryTable组件期待的tables属性，经常是一个getTables方法，对页面上的Tab都用配置文件去解决。确实很简单很方便，功能复用确实很简单，那功能有差异怎么办

【创新及分享】

1. 暂无
