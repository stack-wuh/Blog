## 2024-08-04

本周工作重点:

1. 【视频监控功能升级】本周ERP、KS两端同时遇到了视频监控播放问题，取派和分拨的实现差别很大，分拨实时量重构的时候有一些细节都没注意好，包括之前接口返回的出参也是五花八门，导致生产bug。既然如此还不如把视频监控功能升级为公共功能，强行把交互、出入参一致。例如：需要添加监控功能的是装卸位，对应出参parkNo，那么它对应的编码就应该是parkNoVideoCode，控制它点击状态的就应该是parkNoClickDisabled，完全可以类比加密功能实现。完成上面的改造之后，ERP、KS逻辑完全统一，再也不会有视频播放相关的问题。
2. 【基础功能升级公共】类似上述的视频监控功能可以升级为公共功能之外，还可以继续抽离取派、分拨、操作都有的功能，将其升级为公共功能，我们完全可以通过通用查询来控制绝大部分功能，更关键的是有问题只需要同步通用查询，不用改代码发版。
3. 【生产BUG】粗心大意，居然在箭头函数中直接使用this，导致生产报错不能发起OA。类似这种可以从编码上规避的问题，我们都可以录一个eslint规则，sonar上如果可以加这种代码规范校验自然更好。下周有时间都扫一下，把这种问题代码都扫出来，集中处理一下。